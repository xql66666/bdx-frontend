{"version":3,"sources":["webpack:///./src/api/profile.js","webpack:///./src/views/uc/account.vue?e29e","webpack:///src/views/uc/account.vue","webpack:///./src/views/uc/account.vue?82ff","webpack:///./src/views/uc/account.vue","webpack:///./src/util/validate.js"],"names":["group_name","api_name","userInfo","request","url","method","updateuserInfo","info","setName","nickname","data","findUserHeadImg","accountPass","pass","render","_vm","this","_h","$createElement","_c","_self","_v","ref","staticClass","attrs","ruleForm","rules","staticStyle","model","value","callback","$$v","$set","expression","on","$event","submitForm","resetForm","staticRenderFns","component","isvalidUsername","str","phoneregex","test","isvalidPassword","passwordregex","validateURL","textval","urlregex","validatAlphabets","reg"],"mappings":"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","file":"js/chunk-0fcc3668.89dd5f1e.js","sourcesContent":["import request from '@/util/request'\r\nimport { setName } from '@/util/auth'\r\nconst group_name='v2'\r\nconst api_name='user'\r\n export function userInfo() {\r\n    return request({\r\n      url: `/${group_name}/${api_name}/userInfo`,\r\n      method: 'post',\r\n    })\r\n  }\r\n  export function updateuserInfo(info) {\r\n    setName(info.nickname)\r\n    return request({\r\n      url: `/${group_name}/${api_name}/updateUcInfo`,\r\n      method: 'post',\r\n      data: info\r\n    })\r\n  }\r\n  export function uploadImg(formData) {\r\n    return request({\r\n      url: `/${group_name}/${api_name}/uploadHeadImg`,\r\n      method: 'post',\r\n      data: formData\r\n    })\r\n  }\r\n\r\n  export function findUserHeadImg() {\r\n    return request({\r\n      url: `/${group_name}/${api_name}/findUserHeadImg`,\r\n      method: 'post'\r\n    })\r\n  }\r\n\r\n  export function accountPass(pass) {\r\n    return request({\r\n      url: `/${group_name}/${api_name}/updateUserPassword`,\r\n      method: 'post',\r\n      data: {\r\n        pass\r\n      }\r\n    })\r\n  }","var render = function () {var _vm=this;var _h=_vm.$createElement;var _c=_vm._self._c||_h;return _c('el-main',[_c('h3',[_vm._v(\"我的账号\")]),_c('hr'),_c('br'),_c('el-form',{ref:\"ruleForm\",staticClass:\"demo-ruleForm\",attrs:{\"model\":_vm.ruleForm,\"status-icon\":\"\",\"rules\":_vm.rules,\"label-width\":\"100px\"}},[_c('el-form-item',{attrs:{\"label\":\"重置密码\",\"prop\":\"pass\"}},[_c('el-input',{staticStyle:{\"width\":\"20%\"},attrs:{\"type\":\"password\",\"autocomplete\":\"off\",\"placeholder\":\"密码为5~16位字母，数字或者符号\"},model:{value:(_vm.ruleForm.pass),callback:function ($$v) {_vm.$set(_vm.ruleForm, \"pass\", $$v)},expression:\"ruleForm.pass\"}})],1),_c('el-form-item',{attrs:{\"label\":\"确认密码\",\"prop\":\"checkPass\"}},[_c('el-input',{staticStyle:{\"width\":\"20%\"},attrs:{\"type\":\"password\",\"autocomplete\":\"off\"},model:{value:(_vm.ruleForm.checkPass),callback:function ($$v) {_vm.$set(_vm.ruleForm, \"checkPass\", $$v)},expression:\"ruleForm.checkPass\"}})],1),_c('el-form-item',[_c('el-button',{attrs:{\"type\":\"primary\"},on:{\"click\":function($event){return _vm.submitForm('ruleForm')}}},[_vm._v(\"提交\")]),_c('el-button',{on:{\"click\":function($event){return _vm.resetForm('ruleForm')}}},[_vm._v(\"重置\")])],1)],1)],1)}\nvar staticRenderFns = []\n\nexport { render, staticRenderFns }","<template>\r\n    <el-main>\r\n        <h3>我的账号</h3>\r\n        <hr /><br />\r\n\r\n        <el-form :model=\"ruleForm\" status-icon :rules=\"rules\" ref=\"ruleForm\" label-width=\"100px\" class=\"demo-ruleForm\">\r\n            <el-form-item label=\"重置密码\" prop=\"pass\">\r\n                <el-input type=\"password\" v-model=\"ruleForm.pass\" autocomplete=\"off\" style=\"width: 20%\" placeholder=\"密码为5~16位字母，数字或者符号\"></el-input>\r\n            </el-form-item>\r\n            <el-form-item label=\"确认密码\" prop=\"checkPass\">\r\n                <el-input type=\"password\" v-model=\"ruleForm.checkPass\" autocomplete=\"off\" style=\"width: 20%\"></el-input>\r\n            </el-form-item>\r\n            <el-form-item>\r\n                <el-button type=\"primary\" @click=\"submitForm('ruleForm')\">提交</el-button>\r\n                <el-button @click=\"resetForm('ruleForm')\">重置</el-button>\r\n            </el-form-item>\r\n        </el-form>\r\n\r\n    </el-main>\r\n</template>\r\n\r\n<script>\r\nimport { isvalidPassword } from '@/util/validate'\r\nimport Aes from '@/util/aes'\r\nimport { accountPass } from '@/api/profile'\r\n  export default {\r\n    data() {  \r\n      \r\n      var validatePass = (rule, value, callback) => {\r\n        if (value === '') {\r\n          callback(new Error('请输入密码'));\r\n        }else if(!isvalidPassword(value)) {\r\n            callback(new Error('密码格式不正确'));\r\n        } else {\r\n          if (this.ruleForm.checkPass !== '') {\r\n            this.$refs.ruleForm.validateField('checkPass');\r\n          }\r\n          callback();\r\n        }\r\n      };\r\n      var validatePass2 = (rule, value, callback) => {\r\n        if (value === '') {\r\n          callback(new Error('请再次输入密码'));\r\n        } else if (value !== this.ruleForm.pass) {\r\n          callback(new Error('两次输入密码不一致!'));\r\n        } else {\r\n          callback();\r\n        }\r\n      };\r\n      return {\r\n        ruleForm: {\r\n          pass: '',\r\n          checkPass: '',\r\n          loading: false\r\n        },\r\n        rules: {\r\n          pass: [\r\n            { validator: validatePass, trigger: 'blur' }\r\n          ],\r\n          checkPass: [\r\n            { validator: validatePass2, trigger: 'blur' }\r\n          ]\r\n        }\r\n      };\r\n    },\r\n    methods: {\r\n      submitForm(formName) {\r\n        this.loading = true\r\n        this.$refs[formName].validate((valid) => {\r\n          if (valid) {\r\n            //alert(this.ruleForm.pass);\r\n            accountPass(Aes.encrypt(this.ruleForm.pass)).then( response => {\r\n                this.code = response.code\r\n                if(this.code === 200){\r\n                    this.$message({\r\n                        message: '密码修改成功！',\r\n                        type: 'success'\r\n                    });\r\n                    this.loading = false\r\n                    this.$router.push({ path: '/uc/info' })\r\n                }\r\n                \r\n            })\r\n            \r\n          } else {\r\n            this.$message.error('提交失败！');\r\n            this.loading = false\r\n            return false;\r\n          }\r\n        });\r\n      },\r\n      resetForm(formName) {\r\n        this.$refs[formName].resetFields();\r\n      }\r\n    }\r\n  }\r\n</script>","import mod from \"-!../../../node_modules/_cache-loader@2.0.1@cache-loader/dist/cjs.js??ref--12-0!../../../node_modules/_thread-loader@2.1.3@thread-loader/dist/cjs.js!../../../node_modules/_babel-loader@8.0.6@babel-loader/lib/index.js!../../../node_modules/_cache-loader@2.0.1@cache-loader/dist/cjs.js??ref--0-0!../../../node_modules/_vue-loader@15.7.2@vue-loader/lib/index.js??vue-loader-options!./account.vue?vue&type=script&lang=js&\"; export default mod; export * from \"-!../../../node_modules/_cache-loader@2.0.1@cache-loader/dist/cjs.js??ref--12-0!../../../node_modules/_thread-loader@2.1.3@thread-loader/dist/cjs.js!../../../node_modules/_babel-loader@8.0.6@babel-loader/lib/index.js!../../../node_modules/_cache-loader@2.0.1@cache-loader/dist/cjs.js??ref--0-0!../../../node_modules/_vue-loader@15.7.2@vue-loader/lib/index.js??vue-loader-options!./account.vue?vue&type=script&lang=js&\"","import { render, staticRenderFns } from \"./account.vue?vue&type=template&id=53ab88de&\"\nimport script from \"./account.vue?vue&type=script&lang=js&\"\nexport * from \"./account.vue?vue&type=script&lang=js&\"\n\n\n/* normalize component */\nimport normalizer from \"!../../../node_modules/_vue-loader@15.7.2@vue-loader/lib/runtime/componentNormalizer.js\"\nvar component = normalizer(\n  script,\n  render,\n  staticRenderFns,\n  false,\n  null,\n  null,\n  null\n  \n)\n\nexport default component.exports","/**\r\n * Created by jiachenpan on 16/11/18.\r\n */\r\n\r\nexport function isvalidUsername(str) {\r\n    //const valid_map = ['15188208835', 'editor']\r\n    const phoneregex = /^(((13[0-9]{1})|(15[0-9]{1})|(16[0-9]{1})|(17[3-8]{1})|(18[0-9]{1})|(19[0-9]{1})|(14[5-7]{1}))+\\d{8})$/\r\n    return phoneregex.test(str)\r\n    //return valid_map.indexOf(str.trim()) >= 0\r\n  }\r\n\r\n\r\n  export function isvalidPassword(str) {\r\n    //const valid_map = ['15188208835', 'editor']\r\n    const passwordregex = /^[\\w?=.*[!@#$%^&*?]{5,16}$/\r\n    return passwordregex.test(str)\r\n    //return valid_map.indexOf(str.trim()) >= 0\r\n  }\r\n  \r\n  /* 合法uri*/\r\n  export function validateURL(textval) {\r\n    const urlregex = /^(https?|ftp):\\/\\/([a-zA-Z0-9.-]+(:[a-zA-Z0-9.&%$-]+)*@)*((25[0-5]|2[0-4][0-9]|1[0-9]{2}|[1-9][0-9]?)(\\.(25[0-5]|2[0-4][0-9]|1[0-9]{2}|[1-9]?[0-9])){3}|([a-zA-Z0-9-]+\\.)*[a-zA-Z0-9-]+\\.(com|edu|gov|int|mil|net|org|biz|arpa|info|name|pro|aero|coop|museum|[a-zA-Z]{2}))(:[0-9]+)*(\\/($|[a-zA-Z0-9.,?'\\\\+&%$#=~_-]+))*$/\r\n    return urlregex.test(textval)\r\n  }\r\n  \r\n  /* 小写字母*/\r\n  export function validateLowerCase(str) {\r\n    const reg = /^[a-z]+$/\r\n    return reg.test(str)\r\n  }\r\n  \r\n  /* 大写字母*/\r\n  export function validateUpperCase(str) {\r\n    const reg = /^[A-Z]+$/\r\n    return reg.test(str)\r\n  }\r\n  \r\n  /* 大小写字母*/\r\n  export function validatAlphabets(str) {\r\n    const reg = /^[A-Za-z]+$/\r\n    return reg.test(str)\r\n  }\r\n  \r\n  "],"sourceRoot":""}